/*⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠠⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⠤⠞⣋⠉⣿⣯⣿⢿⣖⠦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⠿⣶⣾⣿⣾⣿⣹⣿⣶⣿⣿⣾⢧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣧⣰⣿⣿⣿⣿⣿⣿⡿⠿⠿⣿⣿⡟⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠟⣠⣿⠟⠋⠉⠀⠈⠀⠀⠀⠀⠘⣿⣧⢣⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⠀⠀⠀⢀⡀⠀⠀⣀⡀⠀⣾⣿⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣿⣿⡏⠀⢻⣯⡽⢿⡄⠘⢿⡯⠵⢻⣟⡋⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣾⠼⣧⠀⠉⠀⠀⠀⠁⠀⠀⠀⠀⢨⣿⢳⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢌⢧⣬⠇⠀⠀⠀⠸⠛⠂⠘⠆⢎⡴⣻⠏⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠉⣿⡆⠀⠀⢾⣯⢿⣗⣀⣼⣹⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⠸⡟⠀⠀⠀⠟⢲⣶⠶⣿⠍⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⣿⠰⡇⠀⠀⠀⠴⢺⣿⣤⢿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⣾⣿⣿⣿⡆⢧⡀⠀⢀⣀⣼⣿⣟⡇⢿⣷⣶⣤⣄⣀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⣀⣴⣶⣿⣿⣿⣿⣿⣿⣿⣷⠀⠳⣄⠀⠉⢿⣿⣿⠇⠸⣿⣿⣿⣿⣿⣿⣷⣦⣄⡀⠀
⠀⢀⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡷⠆⠙⢦⣀⣨⠗⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠀
⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣀⣠⣤⣀⣉⠀⠀⡀⢠⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡆
⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⢁⣼⠿⢿⣿⣿⣿⠲⠶⠶⠯⢤⣠⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇
⠀⡿⣿⣿⣿⣿⣿⣿⣿⡟⣰⢹⣁⡀⠈⠙⣻⣿⣍⣉⣙⣒⣻⠓⢾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡏
⠀⣷⣾⣿⣿⣿⣿⣿⣿⠁⡇⠀⠉⡀⠙⢿⣿⣿⡧⠤⠤⠭⠭⣌⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇
⢀⣿⣿⣿⣿⣿⣿⣿⣿⡟⠁⠀⠀⣇⣤⣾⣿⣿⣗⠒⠒⠲⣶⠦⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇
*/

// Importamos las funcionalidades necesarias de Sequelize para definir el modelo y los tipos de datos.
import { DataTypes, Model } from "sequelize";
// Importamos la instancia de 'sequelize' que es la conexión con la base de datos configurada previamente.
import { sequelize } from "../dbconfig.js";

// La clase 'Pedido' extiende de 'Model', lo que le proporciona todos los métodos de Sequelize para interactuar con la base de datos.
export class Pedido extends Model {}

// 'init' toma dos parámetros: el primero es un objeto que define las columnas del modelo, el segundo es un objeto de configuración.
Pedido.init(
    {
        // Definimos la columna 'id', que será el identificador único de cada registro en la tabla 'pedidos'.
        // 'autoIncrement' indica que cada vez que se crea un nuevo pedido, el id será generado automáticamente.
        // 'primaryKey' asegura que esta columna será la clave primaria de la tabla.
        id: {
            type: DataTypes.INTEGER,  // El tipo de dato será un número entero.
            autoIncrement: true,      // El valor de 'id' se incrementará automáticamente con cada nuevo registro.
            primaryKey: true,         // 'id' será la clave primaria de la tabla.
        },
        
        id_usuario: {
            type: DataTypes.INTEGER,  // El tipo de dato será un número entero, que corresponde al id de un usuario.
            references: {
                model: 'usuarios',    // 'id_usuario' hace referencia a la tabla 'usuarios'.
                key: 'id',            // La clave foránea se vincula con la columna 'id' de la tabla 'usuarios'.
            },
        },
        
        fecha: {
            type: DataTypes.DATE,  // Tipo de dato: fecha y hora (por ejemplo, '2024-11-18 15:30:00').
        },
        
        // Definimos la columna 'estado', que representará el estado del pedido (por ejemplo, 'pendiente', 'en proceso', 'completado').
        // Este campo es de tipo 'STRING' y tiene un límite de 50 caracteres.
        estado: {
            type: DataTypes.STRING(50),  // Tipo de dato: cadena de texto (hasta 50 caracteres).
            // Podríamos agregar una validación aquí si queremos limitar los valores del estado.
        },
    },
    {
        // Aquí pasamos la configuración adicional para el modelo.
        sequelize,  // 'sequelize' es la instancia que conecta el modelo con la base de datos.
        modelName: "Pedido",  // El nombre del modelo, que puede ser utilizado para referirse a este en las consultas.
        tableName: "pedidos",  // El nombre de la tabla en la base de datos a la que se corresponde este modelo.
        timestamps: false,  // Desactivamos la creación automática de los campos 'createdAt' y 'updatedAt'.
        // Si quisiéramos esos campos, los dejaríamos en true (por defecto).
    }
);